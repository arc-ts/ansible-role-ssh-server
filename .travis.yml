---
language: ruby
rvm:
  - 2.3.3
env:
  global:
  - KITCHEN_LOG=warn
  - secure: Pj0msxYXQDo7qtZ6vutEQV5G4R3tStNguTQvTILLMzyNPvaS/ZuwXnFy1fqKS85Ouu450Azep4BbhaH4ovVzxZYs1Uqdmf10hLx1iqg1ZyED87qpB1J3VPb7vBymSy1L43b2a3BhA6ytRUeGAZmSzzFI0AGTPNmGlXXJeIQWjdQ+gXfo8/OO9eLL7DsJeZD+UQzNM3gGVYU9tNtU41JDGHUPQvf2AUU427vEQnLWTKxxLcXK46xgpfC5+VQ6LZ+BnRjF3G3wIZXN5DYlsTVlFUlnOiUCHxznWz1t9XkyvnBFH6RUbkpsJ3IW4+n1rq5YHJjDDzkHj/c7+ozOtLG3RmzErOgmcAUmBeB0sQ9agaKmcm9n4lekwdELCwhHTDrGJvKbdW1S3RLIsPM/Gt0ROFRGSM+IF9JZfAVfROcvbK8AHlOUEPdox7jAMcgrQsfxUcJ6BAf88D4KgbVnN0GKhvPfPkbbscNoVcaW/P8lHoQyz4zvUBqtC23avtljuGtHeuno6CA4xdiDZ0mNGfkMckbvBACeof48w2tYphADNkLwANe45Cy4sI8OoFOl6NfdhYS7LozHcxLmC1WkoE8sP1UFAzlDYtd6thu3ZSHXVKs+8YurltHPTgGoeK0satR+76ysG1g0/mdSbcpvQvvIQOohjh5QWT7AwVpyuRR2yh0=
  - secure: tvINOkrhn6UHHfA5GchN/OGmNNr4Bp7l5KJ4enBpPhMvaIIzBzUNLaF2UhNLcmdefCDHixRp0rNf8V21RiXCwNjq0JG9bK7KA0VArPhFNswA/VvayPoZPUiP6OhmtqSOfV4t2Cf+XfcDG3JBi09dvfIpb1i23qimYRW39Lh/mh+KW9BwBdj+WwOVmuVqyqb2SK8nOnaymlgAujvUYq63xetlHUuIjjtv3pvtwJetcAOQBEU6QDXY7e7M1Xg0FxyeOHdUTLNzaerKQjM8vdzIVPQm9EEPH3b+c2jl61DxojgdgvuQKao/ScKjolpisT8vk1RXcGm04+VuVaxyXQ/6Tvrs0ANAdU6yYN+BJ1XxfCpNlEHp/M5CFl3OwS8sNZtVPfmXg9eGYXJA9KzZQBJeQU2Y4Oz/XPuOAZlvuk0/PRfPp+2TWF/xfwKmSAYuPF+pILTWmQI8ETM7LkEO67+z49TPj1yr67bSSN16yhGCG5de+oihFJ+5cdRRartMx4e9HIg8xaB8JnIkzM3p/lLp9wgw2pLz7oK+QlwHFtxes6v3dEDQ5YmFdsL5R3YyjlqEo/xn1dkX4ABxMOZmgZzrl/C0w9xWPpse5dlqAWpHFu6sDrovTKv6cQgND657zbe5oUGgjsktPwtPaF4CddH5KyyRCXvHl2caZS0eeCTg8fM=
  - secure: qBe0Ikbrflq21k94gE/ibDhDb727TYHCpCO8MNtEEQpxGfB/wepn4+fXOdQX8ruoUG1pLz6T74wVM1AWVhaROE6KBnFs25lxCi/H+M4zJqXAdoIQNwyRm9DGsBWSR6yd2EEh9tKI1SD38RKjZU3MOLy/stJ+F9Cau03D1AlRKKtPIF4t9BY4WK/TnAD52weJBjTVnrDQYjNXu0bjaIxRvejJbB6KEKU9F+NhIV46sGeNNSeFm00PXR+iKwA4BuZ/7Hyqwy8mEAI2gpYOi1wCq6DFhr3HWLPPkRW5l6taUMg7/Iru+vxlacm2ypNAE0tkow8PU00P3MPlVmWOxCcnLgl2MY0V3/GNOVStdXCpYPrlNMzIEkL31cDrJLuzLBoLxpAC4Tuq9eWpktI3dr+mNUVaZv52hu/MvRH9kFv8EHUNZqvtfj7ZMgbF7kYiTyN7P9cS6xnOJTfTk1l4J/BslpHYdIBV8pzQiSVSYXbOO85APUupS2DVlAOuoZUnLJniWvr3uOPl9uEC/t+Hwphi2Epww6D8Jt+sJP7r77IKo4/Mhn+QZXqtqkMh3+yOADxNZ2IoB1SX8PrCagsdP0JcpaAmGUX2UjzyLt8l9K9IAznu3SFk6jVv+puMpQYQW5vgrD+x4I/MeeTX044R9OuaJxfR4Y+S6nZPTJWOO7t8LY0=
  - secure: Luv1SkUMNgP726TLj5ZjMou9n0O5kKWfew3t58D13qNLK6HYrNJVsFc01VEClEkoJV49UigAPLiwEafWc+3xp3x+ZfzVPOBil5BFtS7zDp2glTGxKXr8+lC75X6Zcj+Y8ilBhW56kAV9Y13t3jTidjiE1BOGiOg8IJdLiXLht2H4e52sZMe7dQckhXvhmlrPL++t6sbpk3BJWoxElJAS59Hn9uCsIlVnBCwDJAGPkhdgekiWxZNKqdlXCzbaQZYad9bKSSjTv01G4IZxS2hwl/WEiidpycBMmaimoLgHDfnjofN9FVqdkRMX2jN+wnWQLhvQLuZSiQdaQea6oNNMu4j6shKgD/g2QWGfbmObDon6yj7RF1am27ehtcW2YmDGMtOq9KICWkHV575xF5EA5PBl9uN1syFrgCbcIfk7fdLKxC76bi80kW9t+rmpQ+w0X6MWZ9WoZanCDN7ty1Hpu6W0Kioi8HzVsChAKdGVYdFs/ZWfBLRTNQEm6QBNPdxlXzBWT/I48IJPVdTkrrSYErBTGuqr/ffBsCo61fQG+6+JbqlC8IxHvO/9eX2gBAsRP96Cx57h7BJnarCGQU6qhoxkwqiV2BfJLf+AJHsgi23o6To9J8m3A+uTGfX3oek2dd+CqOvY5ApGAA+nkEO2SdZBQYVABqd345RbvA2BzJk=
  - secure: P9s5GIVC4FECoD/tR5BK2tTs0MJ+IGKeeO7wued8M6BgPj9mC24ma8ZntkXRdce81THddE+onL+TOH8dK0cINOlsbFxY1uQKnl+Uycc+SwAusXSvYe2it8c5iVOcfALET1BeCPgSzI0O7LndxEYzt1WIqMlLfzNFve4DfWIQB3mLfvJwBDsDaZj/368VQ+NLBigx4rJqIr+1SwGrPzHCkQoDUYOzehQrTAbafRZa4hqbl9pYojt+1S01Ip+xKi7nNMBQtHVjgz7CSR0fhPmCAL6TbvRqGjb5HBAP/lPj26gqL86dN80CD7D+zn1shq/ed2/xMa4eD938+LpYY6uJvPgOu/jNeDKMkJWu7YSh3xRSereeK3Ryq/GpMpA2tXB7J+9U7wvmTAKXKq05QiWtgvI7GzxH8N2gwkk3wj31koYXox9S0RwhQhqKFpJRecyuhQX1NM+sFKn7hBD3C9yWcMUNJJuP+6Gi8zgqDwVNbdB3p4MiEz1ymH+EXDxDtdBGA6xWzK5bnuGHTW9J8Mm1IzoSzJaAcdfZgJ0JBFigKT+NgOII1tKTnMSa1TwuIqs10sWjATZOnoK0EJu2Bn1cjaysDTTGMO2oN+gx87oIX420N/jqXeRbuxpp1CnbcRB2xW08qMc2SvcvnaxJuk79VJlfRzsa4voS1ruxiC7D9B8=
  - secure: lgtZ7UYTYZjVQRNjvyqyPiFqNhOh7KmavbKEeG0l+Gr992j0RHv2R/HMW1EMNWrGcKi/0k7VL50b7gIYOlEfN9pcpJovFvq25T+crD77JJ3GzktexIaPulXaTQEd4UIfKQ6Ff8jGOW+hDW1rJ/Quz2AoX6vDYkWBFNwhIFMJ0i4T3MnvhVaepMJpvxxrpSg4ZPxjiqXid2BFjWPVaDGvKjwzBiHEogS6oHCWZZHsTA89pjUDvYOmPtBKwlwPwaaApXEcmnZ23vL+1JhFCSGJLeMLUmibb77ILRIauXm0BZQl3kmwHf1NiioZS/B3U46IXIQF6ru9S3BIGg571J6+g0j+ggXjmaQ1JOrhtSZqrguAKAptnDd8wFLypKz51hCXM13jIZhf3H/llCq14CjJIVX3drlvlm44Flfm1vtmbrSJBaJE/mhFLsDRvK0ArF7h5+bQueQr7XgJfQ8OD0vrPYJbj4woZCxhmQUY3svF1+I3ac5i7b4c5gr+8Wd+r+qYXl5ohBxEkOCKap7qILeBMG0aM3jHsKMIOoTgx8Fy2DFh3XpQMiY0+LgrGpEgxVKUJDs1qv2+jkEbMDI1Mdt7TICOawqr4WglKjSzG8N/QVJls+bAfnUEvQGnHDIB6UmNxkoperNNC1oAiszMiiEkrycZfBXdQVw4Gp6crf+aJDg=
  - secure: t1q5AW8Cj/xvoGd98ReUT88WZZjRHc/2v8GCS1x88Wl4pV9QolitG/EKYrc0YXSklFvxVCvb2oNdLi7GjyeM5ui8fSBugflXuewC6F43Logz3sd0HRUroO6i5FU+ti3A2XQZIOsNp3gLZqsDjvWgAgY0Im9P629WsLm46Cl87UXzrTbBMkAbdNZCF9rAI4ciupofm7fIkPwhE+vOMmdQvMqbWJWP32jNRY6q1D367pCDha+b+WQE5Z/djNqo+rfiA1HvbhbhUjOiDPSNiYw1vI7iKpA47JZZjC1XLpKqSKxRUF2tU64lyB9CrRSMaG0+MBK6uchvhyCLeaPuu0kAy8eNIK627RatDYbqPEkbusOpS8qjkCxuMKce4aqjtwjXy8+BTJTyDve9sdOjjV9z3j3325BgeF9Vnrh9Y+RO4kpPkmFwCjy5WP7Ctc4KCAc2j4+LMsZT1UA6M58md2uaErz7UTE8gN5AlL9giIKLXADl2SjXA6ExHPnPSfjhamO8WNTFrAEBaIzN646RECNKUQEmKdkWGEm0XTN+TCvzmdOBz5JGA0UZmwKrPrNOF1oVzZPG7fmRiLDjUYAvJ7Ych+hapHAbDuhvG9a+VlO3IbE+SNsMqTRRJ88t8d82wlRUvjN5WILKacfV2vv7Y9DTpKvpcuSDC5Ldo15eV7KyIjA=
  - secure: xEoWNdLCNftNGMV676sl2KWaLryFT76vY1oLU7Zsh9kaj3Nh2uNqkaJWqrWo1nOWXC+bNn4IZn7zKhkipORF2ARknrnO98ee4Mib2/SM85qbkQtyXLAF+Yx3I3cqITMDZ6EFBTC2uymuzo3z18yMMFFQ59WwzdnlXDSKzOVGrNZmiJXGg06S5WyiymfEzuxGTYHsV5exOfm0ptsYLcyQgs9Ef7h3Zvg2njnnX6AoFzyWFSPdSTTWr+FU5xjXOhBUG6APaPzOfm6pN1DU2/ADcF/rTKsnq2fURppv+x3XyC/rAb/wgcGsdamgElc0ZNBq+Rz06BV4s1tgFqM09hxlxf00JScRSWpYIaaRaFjUGaNe4DUiEH1e1iZeBv7xvOwCzrS4074YkJvJQ8zuzHWiHQXrBSbUmFHEw+eRoOd3cY8ab3PFoO6JeURdGUNtSbhp9slNCHzXj5hiAyVrWXHMbB31T4H4wSJCyXg3DwjLj/J3+CvZeQmtIOdAiAndpgCugjIkN88nHmNI3ud3iMumgjLshCm3nrErjmrji698yOCG0QQtTGKZvRb7Yft1avCZRq8sM7aEFelgOfN05b7HxZBN6JeAapXy5qEPlapYKVjQo/+oQkDnLxxSXfoE0WMU0xQJ/LeSqwGF/5VX/zSifvoUBUl7HTKnQ7CLGJOqRr4=
  - secure: M4jDxRZQU9/nDihn+7wlsLCbGDbMCzsLTCpC+HsHv4olduaXJN7THpGxyDQf49KA7pY5kokqzMygqUXQ98LDy3bXuDPMVqUBrSi0hzCxbt9+gMragdoKjf6NTuoetUZfY0qQqrgfFCded3VP14yAgGW6kDjmGTKMCwRS6zZS02kxh7FCoOHP4YrkGLlz6xg7BSGh3k7KxnIxTTdrw/HjQk7sgkJz6s25b4sTBcox5GMJosQdixT9xDQln6EItGVg5th4j6dcyhO5ld+uR/pB3F/rbY9Lb29T+FTQ6PFX77uniGhVCoPNi1taXmKOzJogJLd7EvgZz24tDQIjQfsWR0S70UvCH2/3KpspSBrQDkBmCrd6P9b4jGLR0PvZqVcTo0Vwm1luzPcwif8erIJglU1V9TXPF6sRwWFCfUrGECGBFzWCSWAUyo8pCc+fYN+mzKXt0HcdQW2EMtsTPLRbkLL2q87HDZQfyoiiFH4TIsmCYdiiClGKcCFSb+2Fc+/3YFHUjRipHUl8xuOqwdljzeN3ZJkTjtLON+K03bnHd2oOXoxN8hon6PKkUXgrCn37zkrV4VYg9mkDwf72O1f8oVbmEgMg68WSBzMJBkalF7CRr2iROrnjTxz+CV25tw7uycOcIUIelFDyU2vsXJm6lkk0KLDgN5a71m50ZN+ZX5s=

before_install:
  - openssl aes-256-cbc -K $encrypted_a3954097cf88_key -iv $encrypted_a3954097cf88_iv -in provision.key.enc -out provision.key -d
  - bundle install
  - bundle exec rake --tasks

script:
  - bundle exec rake integration:cloud

after_script:
  - bundle exec rake integration:cloud:sgroup-destroy

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
